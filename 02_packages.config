% option_settings:
%   aws:elasticbeanstalk:container:python:
%     WSGIPath: main:app



% commands:
%   01_install_poetry:
%     test: 'test -x /usr/local/bin/poetry'
%     command: |
%       python3 -m venv $VENV_PATH
%       $VENV_PATH/bin/pip install -U pip setuptools
%       $VENV_PATH/bin/pip install poetry
%       poetry --version
%       $VENV_PATH/bin/poetry --version
%
% container_commands:
%   02_alias_python:
%     command: "ln -sf /usr/bin/python3 /usr/bin/python"
%
%   03poetry_config:
%     command: "$VENV_PATH/bin/poetry config virtualenvs.create false"
%
%   04poetry_lock:
%     command: "$VENV_PATH/bin/poetry lock || true"
%
%   05poetry_install:
%     command: "$VENV_PATH/bin/poetry install --no-interaction --no-ansi --only main"
%
%   06rungunicorn:
%     command: "$VENV_PATH/bin/poetry run gunicorn -b 0.0.0.0:8000 main:app"
